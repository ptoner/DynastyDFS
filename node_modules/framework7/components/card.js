(function framework7ComponentLoader(a,e){void 0===e&&(e=!0);document,window;var t=a.$,r=(a.Template7,a.utils),o=(a.device,a.support),n=(a.Class,a.Modal,a.ConstructorMethods,a.ModalMethods,{open:function(a,e){var r;void 0===a&&(a=".card-expandable"),void 0===e&&(e=!0);var n=this;if(!t(".card-opened").length){var s=t(a).eq(0);if(s&&s.length&&!(s.hasClass("card-opened")||s.hasClass("card-opening")||s.hasClass("card-closing"))){var d,c=s.parents(".page").eq(0);if(c.length)if(s.trigger("card:beforeopen",{prevent:J}),n.emit("cardBeforeOpen",s[0],J),!d){var l,i,p;s.attr("data-backdrop-el")&&(l=t(s.attr("data-backdrop-el"))),!l&&n.params.card.backrop&&((l=s.parents(".page-content").find(".card-backdrop")).length||(l=t('<div class="card-backdrop"></div>'),s.parents(".page-content").append(l))),n.params.card.hideNavbarOnOpen&&((i=c.children(".navbar")).length||c[0].f7Page&&(i=c[0].f7Page.$navbarEl)),n.params.card.hideToolbarOnOpen&&((p=c.children(".toolbar")).length||(p=c.parents(".view").children(".toolbar")),p.length||(p=c.parents(".views").children(".toolbar")));var h,f=s.css("transform");f&&f.match(/[2-9]/)&&(h=!0);var g=s.children(".card-content"),v=t(document.createElement("div")).addClass("card-expandable-size");s.append(v);var b,m,u=s[0].offsetWidth,C=s[0].offsetHeight,x=c[0].offsetWidth,k=c[0].offsetHeight,w=v[0].offsetWidth||x,O=v[0].offsetHeight||k,T=w/u,E=O/C,M=s.offset(),H=c.offset();if(M.left-=H.left,M.top-=H.top,h){var $=f.replace(/matrix\(|\)/g,"").split(",").map(function(a){return a.trim()});if($&&$.length>1){var B=parseFloat($[0]);b=M.left-u*(1-B)/2,m=M.top-c.offset().top-C*(1-B)/2,n.rtl&&(b-=s[0].scrollLeft)}else b=s[0].offsetLeft,m=s[0].offsetTop-s.parents(".page-content")[0].scrollTop}else b=M.left,m=M.top-c.offset().top,n.rtl&&(b-=s[0].scrollLeft);m-=(k-O)/2;var W=w-u-(b-=(x-w)/2);n.rtl&&(b=(r=[W,b])[0],W=r[1]);var q,L,N,P,y,z,X,Y,D,F,I,j=O-C-m,A=(W-b)/2,G=(j-m)/2;n.params.card.hideNavbarOnOpen&&i&&i.length&&n.navbar.hide(i,e),n.params.card.hideToolbarOnOpen&&p&&p.length&&n.toolbar.hide(p,e),l&&l.removeClass("card-backdrop-out").addClass("card-backdrop-in"),s.removeClass("card-transitioning"),e&&s.addClass("card-opening"),s.trigger("card:open"),n.emit("cardOpen",s[0]),g.css({width:w+"px",height:O+"px"}).transform("translate3d("+(n.rtl?b+A:-b-A)+"px, 0px, 0) scale("+1/T+", "+1/E+")"),s.transform("translate3d("+A+"px, "+G+"px, 0) scale("+T+", "+E+")"),e?s.transitionEnd(function(){K()}):K(),c.addClass("page-with-card-opened"),s[0].detachEventHandlers=function(){n.off("resize",Q),o.touch&&n.params.card.swipeToClose&&(n.off("touchstart:passive",R),n.off("touchmove:active",S),n.off("touchend:passive",U))},n.on("resize",Q),o.touch&&n.params.card.swipeToClose&&(n.on("touchstart:passive",R),n.on("touchmove:active",S),n.on("touchend:passive",U))}}}function J(){d=!0}function K(){s.addClass("card-opened"),s.removeClass("card-opening"),s.trigger("card:opened"),n.emit("cardOpened",s[0])}function Q(){var a;s.removeClass("card-transitioning"),u=s[0].offsetWidth,C=s[0].offsetHeight,x=c[0].offsetWidth,k=c[0].offsetHeight,w=v[0].offsetWidth||x,O=v[0].offsetHeight||k,T=w/u,E=O/C,s.transform("translate3d(0px, 0px, 0) scale(1)"),M=s.offset(),H=c.offset(),M.left-=H.left,M.top-=H.top,b=M.left-(x-w)/2,n.rtl&&(b-=s[0].scrollLeft),m=M.top-(k-O)/2,W=w-u-b,j=O-C-m,n.rtl&&(b=(a=[W,b])[0],W=a[1]),A=(W-b)/2,G=(j-m)/2,s.transform("translate3d("+A+"px, "+G+"px, 0) scale("+T+", "+E+")"),g.css({width:w+"px",height:O+"px"}).transform("translate3d("+(n.rtl?b+A:-b-A)+"px, 0px, 0) scale("+1/T+", "+1/E+")")}function R(a){t(a.target).closest(s).length&&s.hasClass("card-opened")&&(q=g.scrollTop(),L=!0,P=a.targetTouches[0].pageX,y=a.targetTouches[0].pageY,Y=void 0,F=!1,I=!1)}function S(a){if(L){if(z=a.targetTouches[0].pageX,X=a.targetTouches[0].pageY,void 0===Y&&(Y=!!(Y||Math.abs(X-y)>Math.abs(z-P))),I||F||(!Y&&a.targetTouches[0].clientX<=50?I=!0:F=!0),!I&&!F||F&&0!==q)return L=!0,void(N=!0);N||s.removeClass("card-transitioning"),N=!0,((D=F?Math.max((X-y)/150,0):Math.max((z-P)/(u/2),0))>0&&F||I)&&(F&&n.device.ios&&(g.css("-webkit-overflow-scrolling","auto"),g.scrollTop(0)),a.preventDefault()),D>1&&(D=Math.pow(D,.3)),D>(F?1.3:1.1)?(L=!1,N=!1,n.card.close(s)):s.transform("translate3d("+A+"px, "+G+"px, 0) scale("+T*(1-.2*D)+", "+E*(1-.2*D)+")")}}function U(){L&&N&&(L=!1,N=!1,n.device.ios&&g.css("-webkit-overflow-scrolling",""),D>=.8?n.card.close(s):s.addClass("card-transitioning").transform("translate3d("+A+"px, "+G+"px, 0) scale("+T+", "+E+")"))}},close:function(a,e){void 0===a&&(a=".card-expandable.card-opened"),void 0===e&&(e=!0);var r=this,o=t(a).eq(0);if(o&&o.length&&o.hasClass("card-opened")&&!o.hasClass("card-opening")&&!o.hasClass("card-closing")){var n,s,d,c=o.children(".card-content"),l=o.parents(".page").eq(0);if(l.length)o.attr("data-backdrop-el")&&(d=t(o.attr("data-backdrop-el"))),r.params.card.backrop&&(d=o.parents(".page-content").find(".card-backdrop")),r.params.card.hideNavbarOnOpen&&((n=l.children(".navbar")).length||l[0].f7Page&&(n=l[0].f7Page.$navbarEl),n&&n.length&&r.navbar.show(n,e)),r.params.card.hideToolbarOnOpen&&((s=l.children(".toolbar")).length||(s=l.parents(".view").children(".toolbar")),s.length||(s=l.parents(".views").children(".toolbar")),s&&s.length&&r.toolbar.show(s,e)),l.removeClass("page-with-card-opened"),d&&d.length&&d.removeClass("card-backdrop-in").addClass("card-backdrop-out"),o.removeClass("card-opened card-transitioning"),e?o.addClass("card-closing"):o.addClass("card-no-transition"),o.transform(""),o.trigger("card:close"),r.emit("cardClose",o[0]),c.css({width:"",height:""}).transform("").scrollTop(0,e?300:0),e?c.transitionEnd(function(){i()}):i(),o[0].detachEventHandlers&&(o[0].detachEventHandlers(),delete o[0].detachEventHandlers)}function i(){o.removeClass("card-closing card-no-transition"),o.trigger("card:closed"),o.find(".card-expandable-size").remove(),r.emit("cardClosed",o[0])}},toggle:function(a,e){void 0===a&&(a=".card-expandable");var r=t(a).eq(0);r.length&&(r.hasClass("card-opened")?this.card.close(r,e):this.card.open(r,e))}}),s={name:"card",params:{card:{hideNavbarOnOpen:!0,hideToolbarOnOpen:!0,swipeToClose:!0,closeByBackdropClick:!0,backrop:!0}},create:function(){r.extend(this,{card:{open:n.open.bind(this),close:n.close.bind(this),toggle:n.toggle.bind(this)}})},on:{pageBeforeIn:function(a){if(this.params.card.hideNavbarOnOpen&&a.navbarEl&&a.$el.find(".card-opened.card-expandable").length&&this.navbar.hide(a.navbarEl),this.params.card.hideToolbarOnOpen&&a.$el.find(".card-opened.card-expandable").length){var e=a.$el.children(".toolbar");e.length||(e=a.$el.parents(".view").children(".toolbar")),e.length||(e=a.$el.parents(".views").children(".toolbar")),e&&e.length&&this.toolbar.hide(e)}}},clicks:{".card-close":function(a,e){this.card.close(e.card)},".card-open":function(a,e){this.card.open(e.card)},".card-expandable":function(a,e,r){a.hasClass("card-opened")||a.hasClass("card-opening")||a.hasClass("card-closing")||t(r.target).closest(".card-prevent-open").length||this.card.open(a)},".card-backdrop-in":function(){var a=!1;this.params.card.closeByBackdropClick&&(a=!0);var e=t(".card-opened");e.length&&("true"===e.attr("data-close-on-backdrop-click")?a=!0:"false"===e.attr("data-close-on-backdrop-click")&&(a=!1),a&&this.card.close(e))}}};if(e){if(a.prototype.modules&&a.prototype.modules[s.name])return;a.use(s),a.instance&&(a.instance.useModuleParams(s,a.instance.params),a.instance.useModule(s))}return s}(Framework7, typeof Framework7AutoInstallComponent === 'undefined' ? undefined : Framework7AutoInstallComponent))
